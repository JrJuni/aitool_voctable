# 🌐 VOC 시스템 내부망 접속 설정 가이드

## 📋 개요
VOC 시스템을 내부망의 다른 사용자들이 접속할 수 있도록 설정하는 방법을 안내합니다.

## 🔧 설정 단계

### 1. 관리자 권한으로 PowerShell 실행
```powershell
# PowerShell을 관리자 권한으로 실행
# 시작 메뉴 > PowerShell > 우클릭 > "관리자 권한으로 실행"
```

### 2. 방화벽 설정 스크립트 실행
```powershell
# 프로젝트 디렉토리로 이동
cd "C:\Users\tyric\Desktop\Study\mb_tool\projects\voc_table"

# 방화벽 설정 스크립트 실행
.\setup_network_access.ps1
```

### 3. 수동 방화벽 설정 (스크립트 실행 실패 시)
1. **Windows 방화벽** > **고급 설정** > **인바운드 규칙** > **새 규칙**
2. **포트** 선택 > **TCP** > **특정 로컬 포트**: `8000, 8501`
3. **연결 허용** 선택
4. **모든 프로필** 선택
5. 이름: `VOC Backend API`, `VOC Frontend Streamlit`

## 🚀 서버 실행

### 백엔드 서버 실행
```bash
python run_backend.py
```
- **로컬 접속**: http://localhost:8000
- **내부망 접속**: http://172.16.5.75:8000
- **API 문서**: http://172.16.5.75:8000/docs

### 프론트엔드 실행
```bash
python run_frontend.py
```
- **로컬 접속**: http://localhost:8501
- **내부망 접속**: http://172.16.5.75:8501

## 👥 다른 사용자 접속 방법

### 1. 브라우저 접속
```
http://172.16.5.75:8501
```

### 2. 사용자 계정 생성
1. 첫 접속 시 관리자 계정으로 로그인
2. **Admin** 탭에서 새 사용자 생성
3. 권한 레벨 설정 (1-5)

### 3. 권한 레벨 설명
- **Level 1**: VOC 조회만 가능
- **Level 2+**: VOC, Company, Contact, Project 모든 테이블 조회/편집 가능
- **Level 4+**: 사용자 관리, 감사 로그 조회 가능
- **Level 5**: 모든 권한

## 🔒 보안 설정

### CORS 설정
현재 내부망 대역 (172.16.5.*)에서만 접속 가능하도록 설정되어 있습니다.

### JWT 토큰
- 기본 만료 시간: 30분
- 환경변수 `TOKEN_EXPIRE_MIN`으로 조정 가능

### 비밀번호 정책
- 기본 관리자 계정: `admin` / `admin0417`
- 운영 환경에서는 반드시 비밀번호 변경 필요

## 🛠️ 문제 해결

### 접속 불가 시 확인사항
1. **방화벽 설정**: 포트 8000, 8501이 열려있는지 확인
2. **네트워크 연결**: 같은 내부망에 연결되어 있는지 확인
3. **서버 실행**: 백엔드와 프론트엔드가 모두 실행 중인지 확인
4. **IP 주소**: `ipconfig`로 현재 IP 주소 확인

### IP 주소 변경 시
1. `backend/app/main.py`의 CORS 설정 수정
2. `frontend/streamlit_app.py`의 API_BASE_URL 수정
3. `env.example` 파일의 IP 주소 수정

### 포트 충돌 시
1. `run_backend.py`에서 포트 번호 변경
2. `run_frontend.py`에서 포트 번호 변경
3. 방화벽 규칙도 함께 수정

## 📞 지원

문제가 발생하면 다음을 확인해주세요:
1. 서버 로그 확인
2. 네트워크 연결 상태 확인
3. 방화벽 설정 확인
4. 사용자 권한 확인

---

**⚠️ 주의사항**
- 내부망에서만 접속 가능합니다
- 보안을 위해 외부망 접속은 차단됩니다
- 정기적인 백업을 권장합니다
